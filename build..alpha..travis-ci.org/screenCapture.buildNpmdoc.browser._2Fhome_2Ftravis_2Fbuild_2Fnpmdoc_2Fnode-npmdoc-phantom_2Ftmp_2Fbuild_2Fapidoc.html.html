<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/amir20/phantomjs-node">phantom (v4.0.1)</a>
</h1>
<h4>PhantomJS integration module for NodeJS</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom">module phantom</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.create">
            function <span class="apidocSignatureSpan">phantom.</span>create
            <span class="apidocSignatureSpan">(args, config)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan"></span>phantom</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantom.</span>command</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantom.</span>default</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantom.</span>out_object</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantom.</span>page</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom.command">module phantom.command</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.command.default">
            function <span class="apidocSignatureSpan">phantom.command.</span>default
            <span class="apidocSignatureSpan">(target, name, params = [])</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom.default">module phantom.default</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.default.create">
            function <span class="apidocSignatureSpan">phantom.default.</span>create
            <span class="apidocSignatureSpan">(args, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom.out_object">module phantom.out_object</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.out_object.default">
            function <span class="apidocSignatureSpan">phantom.out_object.</span>default
            <span class="apidocSignatureSpan">(phantom)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom.page">module phantom.page</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.page.default">
            function <span class="apidocSignatureSpan">phantom.page.</span>default
            <span class="apidocSignatureSpan">(phantom, pageId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantom.phantom">module phantom.phantom</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantom.phantom.default">
            function <span class="apidocSignatureSpan">phantom.phantom.</span>default
            <span class="apidocSignatureSpan">(if unset or default)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom" id="apidoc.module.phantom">module phantom</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.create" id="apidoc.element.phantom.create">
        function <span class="apidocSignatureSpan">phantom.</span>create
        <span class="apidocSignatureSpan">(args, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function create(args, config) {
  return new Promise(resolve =&gt; resolve(new _phantom2.default(args, config)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


## Super easy to use
```js
const phantom = require('phantom');

(async function() {
const instance = await phantom.<span class="apidocCodeKeywordSpan">create</span>();
const page = await instance.createPage();
await page.on("onResourceRequested", function(requestData) {
    console.info('Requesting', requestData.url)
});

const status = await page.open('https://stackoverflow.com/');
console.log(status);
...</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom.command" id="apidoc.module.phantom.command">module phantom.command</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.command.default" id="apidoc.element.phantom.command.default">
        function <span class="apidocSignatureSpan">phantom.command.</span>default
        <span class="apidocSignatureSpan">(target, name, params = [])</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Command {

    constructor(target, name, params = []) {
        this.id = NEXT_ID++;
        this.target = target;
        this.name = name;
        this.params = params;
        this.deferred = null;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Returns a new instance of Promise which resolves to a {@link Page}.
 * @returns {Promise.&lt;Page&gt;}
 */
createPage() {
    const logger = this.logger;
    return this.execute('phantom', 'createPage').then(response =&gt; {
        let page = new _page2.<span class="apidocCodeKeywordSpan">default</span>(this, response.pageId);
        if (typeof Proxy === 'function') {
            page = new Proxy(page, {
                set: function (target, prop) {
                    logger.warn(`Using page.${prop} = ...; is not supported. Use page.property('${prop}', ...) ` + '
;instead. See the README file for more examples of page#property.');
                    return false;
                }
            });
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom.default" id="apidoc.module.phantom.default">module phantom.default</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.default.create" id="apidoc.element.phantom.default.create">
        function <span class="apidocSignatureSpan">phantom.default.</span>create
        <span class="apidocSignatureSpan">(args, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function create(args, config) {
  return new Promise(resolve =&gt; resolve(new _phantom2.default(args, config)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


## Super easy to use
```js
const phantom = require('phantom');

(async function() {
const instance = await phantom.<span class="apidocCodeKeywordSpan">create</span>();
const page = await instance.createPage();
await page.on("onResourceRequested", function(requestData) {
    console.info('Requesting', requestData.url)
});

const status = await page.open('https://stackoverflow.com/');
console.log(status);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom.out_object" id="apidoc.module.phantom.out_object">module phantom.out_object</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.out_object.default" id="apidoc.element.phantom.out_object.default">
        function <span class="apidocSignatureSpan">phantom.out_object.</span>default
        <span class="apidocSignatureSpan">(phantom)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class OutObject {

    constructor(phantom) {
        this._phantom = phantom;
        this.target = 'OutObject$' + _crypto2.default.randomBytes(16).toString('hex');
    }

    property(name) {
        return this._phantom.execute(this.target, 'property', [name]);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Returns a new instance of Promise which resolves to a {@link Page}.
 * @returns {Promise.&lt;Page&gt;}
 */
createPage() {
    const logger = this.logger;
    return this.execute('phantom', 'createPage').then(response =&gt; {
        let page = new _page2.<span class="apidocCodeKeywordSpan">default</span>(this, response.pageId);
        if (typeof Proxy === 'function') {
            page = new Proxy(page, {
                set: function (target, prop) {
                    logger.warn(`Using page.${prop} = ...; is not supported. Use page.property('${prop}', ...) ` + '
;instead. See the README file for more examples of page#property.');
                    return false;
                }
            });
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom.page" id="apidoc.module.phantom.page">module phantom.page</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.page.default" id="apidoc.element.phantom.page.default">
        function <span class="apidocSignatureSpan">phantom.page.</span>default
        <span class="apidocSignatureSpan">(phantom, pageId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Page {

    constructor(phantom, pageId) {
        this.target = 'page$' + pageId;
        this.phantom = phantom;
    }

<span class="apidocCodeCommentSpan">    /**
     * Add an event listener to the page on phantom
     *
     * @param event The name of the event (Ej. onResourceLoaded)
     * @param [runOnPhantom=false] Indicate if the event must run on the phantom runtime or not
     * @param listener The event listener. When runOnPhantom=true, this listener code would be run on phantom, and thus,
     * all the closure info wont work
     * @returns {*}
     */
</span>    on(event, runOnPhantom, listener) {
        let mustRunOnPhantom;
        let callback;
        let args;

        if (typeof runOnPhantom === 'function') {
            args = [].slice.call(arguments, 2);
            mustRunOnPhantom = false;
            callback = runOnPhantom.bind(this);
        } else {
            args = [].slice.call(arguments, 3);
            mustRunOnPhantom = runOnPhantom;
            callback = mustRunOnPhantom ? listener : listener.bind(this);
        }

        return this.phantom.on(event, this.target, mustRunOnPhantom, callback, args);
    }

    /**
     * Removes an event listener
     *
     * @param event the event name
     * @returns {*}
     */
    off(event) {
        return this.phantom.off(event, this.target);
    }

    /**
     * Invokes an asynchronous method
     */
    invokeAsyncMethod() {
        return this.phantom.execute(this.target, 'invokeAsyncMethod', [].slice.call(arguments));
    }

    /**
     * Invokes a method
     */
    invokeMethod() {
        return this.phantom.execute(this.target, 'invokeMethod', [].slice.call(arguments));
    }

    /**
     * Defines a method
     */
    defineMethod(name, definition) {
        return this.phantom.execute(this.target, 'defineMethod', [name, definition]);
    }

    /**
     * Gets or sets a property
     */
    property() {
        return this.phantom.execute(this.target, 'property', [].slice.call(arguments));
    }

    /**
     * Gets or sets a setting
     */
    setting() {
        return this.phantom.execute(this.target, 'setting', [].slice.call(arguments));
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Returns a new instance of Promise which resolves to a {@link Page}.
 * @returns {Promise.&lt;Page&gt;}
 */
createPage() {
    const logger = this.logger;
    return this.execute('phantom', 'createPage').then(response =&gt; {
        let page = new _page2.<span class="apidocCodeKeywordSpan">default</span>(this, response.pageId);
        if (typeof Proxy === 'function') {
            page = new Proxy(page, {
                set: function (target, prop) {
                    logger.warn(`Using page.${prop} = ...; is not supported. Use page.property('${prop}', ...) ` + '
;instead. See the README file for more examples of page#property.');
                    return false;
                }
            });
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantom.phantom" id="apidoc.module.phantom.phantom">module phantom.phantom</a></h1>


    <h2>
        <a href="#apidoc.element.phantom.phantom.default" id="apidoc.element.phantom.phantom.default">
        function <span class="apidocSignatureSpan">phantom.phantom.</span>default
        <span class="apidocSignatureSpan">(if unset or default)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Phantom {

<span class="apidocCodeCommentSpan">    /**
     * Creates a new instance of Phantom
     *
     * @param args command args to pass to phantom process
     * @param [phantomPath] path to phantomjs executable
     * @param [logger] object containing functions used for logging
     * @param [logLevel] log level to apply on the logger (if unset or default)
     */
</span>    constructor(args = [], { phantomPath = _phantomjsPrebuilt2.default.path, logger = defaultLogger, logLevel = defaultLogLevel } = {
        phantomPath: _phantomjsPrebuilt2.default.path,
        logger: defaultLogger,
        logLevel: defaultLogLevel
    }) {
        if (!Array.isArray(args)) {
            throw new Error('Unexpected type of parameters. Expecting args to be array.');
        }

        if (typeof phantomPath !== 'string') {
            throw new Error('PhantomJS binary was not found. ' + 'This generally means something went wrong when installing phantomjs
-prebuilt. Exiting.');
        }

        if (typeof logger !== 'object') {
            throw new Error('logger must be ba valid object.');
        }

        logger.debug = logger.debug || (() =&gt; undefined);
        logger.info = logger.info || (() =&gt; undefined);
        logger.warn = logger.warn || (() =&gt; undefined);
        logger.error = logger.error || (() =&gt; undefined);

        this.logger = logger;

        if (logLevel !== defaultLogLevel) {
            this.logger = createLogger();
            this.logger.transports.console.level = logLevel;
        }

        const pathToShim = _path2.default.normalize(__dirname + '/shim/index.js');
        this.logger.debug(`Starting ${phantomPath} ${args.concat([pathToShim]).join(' ')}`);

        this.process = (0, _child_process.spawn)(phantomPath, args.concat([pathToShim]), { env: process.env });
        this.process.stdin.setDefaultEncoding('utf-8');

        this.commands = new Map();
        this.events = new Map();

        this.process.stdout.pipe((0, _split2.default)()).on('data', data =&gt; {
            const message = data.toString('utf8');
            if (message[0] === '&gt;') {
                // Server end has finished NOOP, lets allow NOOP again..
                if (message === '&gt;' + NOOP) {
                    this.logger.debug('Received NOOP command.');
                    this.isNoOpInProgress = false;
                    return;
                }
                const json = message.substr(1);
                this.logger.debug('Parsing: %s', json);

                const parsedJson = JSON.parse(json);
                const command = this.commands.get(parsedJson.id);

                if (command != null) {
                    const deferred = command.deferred;

                    if (deferred != null) {
                        if (parsedJson.error === undefined) {
                            deferred.resolve(parsedJson.response);
                        } else {
                            deferred.reject(new Error(parsedJson.error));
                        }
                    } else {
                        this.logger.error('deferred object not found for command.id: ' + parsedJson.id);
                    }

                    this.commands.delete(command.id);
                } else {
                    this.logger.error('command not found for command.id: ' + parsedJson.id);
                }
            } else if (message.indexOf('&lt;event&gt;') === 0) {
                const json = message.substr(7);
                this.logger.debug('Parsing: %s', json);
                const event = JSON.parse(json);

                const emitter = this.events.get(event.target);
                if (emitter) {
                    emitter.emit.apply(emitter, [event.type].concat(event.args));
                }
            } else if (message &amp;&amp; message.length &gt; 0) {
                this.logger.info(message);
            }
        });

        this.process.stderr.on('data', data =&gt; this.logger.error(data.toString('utf8')));
        this.process.on('exit', code =&gt; {
            this.logger.debug(`Child exited with code {${code}}`);
            this._rejectAllComman ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Returns a new instance of Promise which resolves to a {@link Page}.
 * @returns {Promise.&lt;Page&gt;}
 */
createPage() {
    const logger = this.logger;
    return this.execute('phantom', 'createPage').then(response =&gt; {
        let page = new _page2.<span class="apidocCodeKeywordSpan">default</span>(this, response.pageId);
        if (typeof Proxy === 'function') {
            page = new Proxy(page, {
                set: function (target, prop) {
                    logger.warn(`Using page.${prop} = ...; is not supported. Use page.property('${prop}', ...) ` + '
;instead. See the README file for more examples of page#property.');
                    return false;
                }
            });
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>